<html>

<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/stylesheet.css">
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.20.min.js"></script>
</head>

<body>
<div class="container">

    <div class="row">
        <div class="col-sm-6">
            <div id="realImage">
                <img id="detectorImg" src="img/poop.png">
            </div>
        </div>

        <div class="col-sm-6">
            <div id="genImage">
                <p>  - - - - - - - <br>
                     - - - - - - - <br>
                     - - - - - - - <br>
                     - - - - - - - <br>
                     - - 0 - - - - <br>
                     - 0 x x 0 - - </p>             
                <!-- 
                <canvas/>
                -->
            </div>
        </div>
    </div>

    <div class="row">
        <div id="scores">
            <!-- Leaderboard? -->
        </div>
    </div>
</div>

<script type="text/javascript">
    //Create an Amazon Cognito identity pool with access enabled for unauthenticated identities.
    const objectBucketName = 'BUCKET_NAME';
    const bucketRegion = 'REGION';
    const IdentityPoolId = 'IDENTITY_POOL_ID';
    
    AWS.config.update({
        region: bucketRegion,
        credentials: new AWS.CognitoIdentityCredentials({
        IdentityPoolId: IdentityPoolId
        })
    });
    
    const s3 = new AWS.S3();
    
    /**
     * INSTEAD OF BELOW, "click" EVENT LISTENER
     *    would be cheaper $$ since we aren't attempting to get an object every
     *    3 seconds.
     * 
     * let imgDom = document.getElementById('detectorImg');
     * imgDom.addEventListener("click", function() { ... });
     */
    
    function checkDate() {
        //could do this on the server portion too
        let lastCheck = new Date();
        setInterval(function() {
              let params = {
                  Bucket: objectBucketName, /* required */
                  Key: 'STRING_VALUE', /* required */
                  IfModifiedSince: lastCheck,
              }
              s3.getObject(params, function(err, data) {
                  if(err) {
                      console.log("ERROR with GET " + params);
                      return;
                  }
                  
                  lastCheck = new Date();
                  updateField();
                  
              });
        }, 3000);
    }
    
    function updateField() {
        //https://s3-<region>.amazonaws.com/<bucket-name>/<key>
        let img = document.getElementById('detectorImg').src()
    }
    
</script>
</body>

</html>